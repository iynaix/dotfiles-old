#!/usr/bin/env bash

_rofi() {
    rofi -dmenu -sep '|' -disable-history true -cycle true -lines 4 -theme-str "mainbox { children: [listview]; }" "$@"
}

choice=$(printf "Restart|Shutdown|Logout|Lock" | _rofi)

case "$choice" in
    "Lock")
        betterlockscreen -l dimblur
        mpvctl pause
        # TODO: mute music
        ;;

    "Logout")
        choice=$(echo "No|Yes" | _rofi -mesg "Logging out. Are you sure?")
        if [ "$choice" = "Yes" ]; then
            bspc quit
        fi
        ;;

    "Restart")
        choice=$(echo "No|Yes" | _rofi -mesg "Rebooting. Are you sure?")
        if [ "$choice" = "Yes" ]; then
            systemctl reboot
        fi
        ;;

    "Shutdown")
        choice=$(echo "No|Yes" | _rofi -mesg "Shutting Down. Are you sure?")
        if [ "$choice" = "Yes" ]; then
            systemctl poweroff
        fi
        ;;
esac
