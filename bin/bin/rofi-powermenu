#!/usr/bin/env bash

_rofi() {
    rofi -sep '|' -disable-history true -cycle true \
        -theme ~/.config/rofi/theme/rofi-simplemenu.rasi \
        -dmenu -font "FuraCode Nerd Font 30" "$@"
    }

# choice=$(echo "||||||" | _rofi)

choice=$(echo "|||||" | _rofi)

case "$choice" in
    )
        betterlockscreen -l dimblur
        mpvctl pause
        # TODO: mute music
        ;;

    )
        # suspend
        xset dpms force off
        ;;

    )
        choice=$(echo "No|Yes" | _rofi -mesg "<span face='Clear Sans' font='20' weight='bold'>Logging out. Are you sure?</span>")
        if [ "$choice" = "Yes" ]; then
            bspc quit
        fi
        ;;

    )
        choice=$(echo "No|Yes" | _rofi -mesg "<span face='Clear Sans' font='20' weight='bold'>Rebooting. Are you sure?</span>")
        if [ "$choice" = "Yes" ]; then
            systemctl reboot
        fi
        ;;

    )
        choice=$(echo "No|Yes" | _rofi -mesg "<span face='Clear Sans' font='20' weight='bold'>Shutting Down. Are you sure?</span>")
        if [ "$choice" = "Yes" ]; then
            systemctl poweroff
        fi
        ;;

    )
        choice=$(echo "No|Yes" | _rofi -mesg "<span face='Clear Sans' font='20' weight='bold'>Powering Off. Are you sure?</span>")
        if [ "$choice" = "Yes" ]; then
            curl http://192.168.1.103:1880/endpoint/toggle_power
        fi
        ;;

    )
        choice=$(echo "No|Yes" | _rofi -mesg "<span face='Clear Sans' font='20' weight='bold'>Bedtime. Are you sure?</span>")
        if [ "$choice" = "Yes" ]; then
            curl http://192.168.1.103:1880/endpoint/toggle_power
        fi
        ;;
esac
